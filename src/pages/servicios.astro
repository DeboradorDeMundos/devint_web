---
import BaseLayout from "../layouts/BaseLayout.astro";
import Header from "../components/common/Header.astro";
import Footer from "../components/common/Footer.astro";
import { getCollection } from "astro:content";

const pageTitle = "Servicios Devint | Desarrollo, Integraciones, SAP y Cloud";
const pageDescription =
  "Soluciones tecnológicas de Devint: desarrollo de software a medida, integraciones, consultoría SAP y servicios cloud con equipos ágiles.";

const services = (await getCollection("services")).sort((a, b) =>
  a.data.category.localeCompare(b.data.category)
);
const featuredServices = services.filter((service) => service.data.featured);
const otherServices = services.filter((service) => !service.data.featured);
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  seo={{ canonical: "https://devint.cl/servicios", keywords: "servicios devint, desarrollo de software, integraciones, sap, cloud" }}
>
  <Header />

  <main class="pt-20">
    <section class="py-20 relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-slate-900/95 via-slate-800/90 to-slate-900/95"></div>
      <div class="absolute inset-0 opacity-10">
        <svg class="w-full h-full" viewBox="0 0 1000 1000" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <pattern id="services-pattern" x="0" y="0" width="60" height="60" patternUnits="userSpaceOnUse">
              <circle cx="30" cy="30" r="1.5" fill="rgba(16, 185, 129, 0.35)" />
              <line x1="0" y1="30" x2="60" y2="30" stroke="rgba(16, 185, 129, 0.2)" stroke-width="0.5" />
              <line x1="30" y1="0" x2="30" y2="60" stroke="rgba(16, 185, 129, 0.2)" stroke-width="0.5" />
            </pattern>
          </defs>
          <rect width="100%" height="100%" fill="url(#services-pattern)" />
        </svg>
      </div>
      <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(circle at 40% 60%, rgba(16, 185, 129, 0.25) 0%, transparent 45%);"></div>

      <div class="container mx-auto px-6 relative z-10">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div class="space-y-6">
            <p class="text-sm uppercase tracking-widest text-emerald-400">Servicios Devint</p>
            <h1 class="text-5xl lg:text-6xl font-bold text-white leading-tight">
              Soluciones digitales diseñadas para generar resultados medibles
            </h1>
            <p class="text-lg text-slate-300 leading-relaxed">
              Nos integramos a tus equipos para diagnosticar, construir y operar productos digitales que impulsan tu negocio. Adaptamos nuestros modelos de servicio a tus metas, tiempos y presupuesto.
            </p>
            <div class="flex flex-col sm:flex-row gap-4">
              <a href="#portafolio" class="bg-gradient-to-r from-emerald-500 to-cyan-500 text-white px-8 py-4 rounded-full font-semibold hover:from-emerald-600 hover:to-cyan-600 transition-all duration-300 shadow-lg hover:shadow-emerald-500/25 text-center">
                Ver servicios
              </a>
              <a href="/contacto" class="border-2 border-emerald-500 text-emerald-400 px-8 py-4 rounded-full font-semibold hover:bg-emerald-500 hover:text-white transition-all duration-300 text-center">
                Agenda una conversación
              </a>
            </div>
          </div>
          <div class="relative">
            <div class="absolute -top-10 -left-10 w-24 h-24 bg-emerald-500/20 rounded-full blur-3xl"></div>
            <div class="absolute -bottom-10 -right-10 w-24 h-24 bg-cyan-500/20 rounded-full blur-3xl"></div>
            <div class="relative bg-slate-800/60 border border-slate-700 rounded-3xl p-8 backdrop-blur">
              <h2 class="text-emerald-400 text-sm font-semibold tracking-wide uppercase mb-4">Nuestros compromisos</h2>
              <ul class="space-y-4 text-slate-200">
                <li class="flex items-start gap-3">
                  <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-400 text-sm">1</span>
                  <div>
                    <p class="font-semibold">Roadmap compartido y métricas claras</p>
                    <p class="text-slate-400 text-sm">Cada iniciativa se prioriza con KPIs de negocio y entregables de corto plazo.</p>
                  </div>
                </li>
                <li class="flex items-start gap-3">
                  <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-400 text-sm">2</span>
                  <div>
                    <p class="font-semibold">Equipos senior multidisciplinarios</p>
                    <p class="text-slate-400 text-sm">Product, diseño, desarrollo, QA y DevOps alineados con tus stakeholders.</p>
                  </div>
                </li>
                <li class="flex items-start gap-3">
                  <span class="mt-1 inline-flex h-6 w-6 items-center justify-center rounded-full bg-emerald-500/20 text-emerald-400 text-sm">3</span>
                  <div>
                    <p class="font-semibold">Soporte y evolución continua</p>
                    <p class="text-slate-400 text-sm">Mantención preventiva, monitoreo y optimización 24/7 para soluciones críticas.</p>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="portafolio" class="py-20 relative">
      <div class="absolute inset-0 bg-gradient-to-b from-slate-800/30 via-slate-900/80 to-slate-800/60"></div>
      <div class="container mx-auto px-6 relative z-10">
        <div class="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-12">
          <div>
            <h2 class="text-4xl font-bold text-white mb-4">Lo que construimos con nuestros clientes</h2>
            <p class="text-lg text-slate-300 max-w-2xl">
              Descubre cómo combinamos estrategia, diseño y tecnología para entregar soluciones completas. Selecciona un servicio para conocer el detalle de nuestro enfoque.
            </p>
          </div>
          <div class="flex gap-3">
            <span class="inline-flex items-center gap-2 rounded-full border border-emerald-500/30 bg-emerald-500/10 px-4 py-2 text-sm text-emerald-300">
              <span class="h-2 w-2 rounded-full bg-emerald-400"></span>
              Servicios destacados
            </span>
          </div>
        </div>

        <div class="grid gap-10 lg:grid-cols-3">
          {featuredServices.map(({ slug, data }) => (
            <article class="group relative overflow-hidden rounded-3xl border border-emerald-500/30 bg-slate-900/60 p-8 backdrop-blur transition-all duration-300 hover:-translate-y-2 hover:border-emerald-400/60 hover:shadow-emerald-500/20">
              <div class="absolute -right-20 -top-20 h-40 w-40 rounded-full bg-emerald-500/10 blur-3xl transition-opacity duration-300 group-hover:opacity-80"></div>
              <div class="relative z-10 space-y-6">
                <div class="flex items-center gap-4">
                  {data.icon ? (
                    <img src={data.icon} alt={data.title} class="h-14 w-14 rounded-2xl bg-slate-800 p-3" loading="lazy" />
                  ) : (
                    <div class="h-14 w-14 rounded-2xl bg-gradient-to-br from-emerald-500 to-cyan-500"></div>
                  )}
                  <div>
                    <span class="text-sm uppercase tracking-widest text-emerald-300">{data.category}</span>
                    <h3 class="text-2xl font-bold text-white">{data.title}</h3>
                  </div>
                </div>

                <p class="text-slate-300 leading-relaxed">{data.shortDescription}</p>

                <ul class="space-y-2 text-sm text-slate-400">
                  {data.features.slice(0, 4).map((feature) => (
                    <li>
                      <span class="text-emerald-400">•</span> {feature}
                    </li>
                  ))}
                </ul>

                <div class="flex flex-wrap items-center justify-between gap-4">
                  {data.pricing?.price && (
                    <span class="rounded-full border border-emerald-500/40 bg-emerald-500/10 px-4 py-2 text-sm font-semibold text-emerald-200">
                      {data.pricing.price}
                    </span>
                  )}
                  <a href={`/servicios/${slug}`}
                     class="inline-flex items-center gap-2 text-emerald-300 transition-colors hover:text-emerald-200">
                    Ver detalle
                    <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7 7 7-7 7" />
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          ))}
        </div>

        {otherServices.length > 0 && (
          <div class="mt-16 grid gap-8 md:grid-cols-2">
            {otherServices.map(({ slug, data }) => (
              <article class="rounded-3xl border border-slate-700 bg-slate-900/40 p-6 transition-all duration-300 hover:-translate-y-1 hover:border-emerald-400/40">
                <div class="flex items-start gap-4">
                  {data.icon ? (
                    <img src={data.icon} alt={data.title} class="mt-1 h-12 w-12 rounded-2xl bg-slate-800 p-3" loading="lazy" />
                  ) : (
                    <div class="mt-1 h-12 w-12 rounded-2xl bg-gradient-to-br from-emerald-500 to-cyan-500"></div>
                  )}
                  <div class="space-y-4">
                    <div>
                      <span class="text-xs uppercase tracking-widest text-emerald-300">{data.category}</span>
                      <h3 class="text-xl font-semibold text-white">{data.title}</h3>
                    </div>
                    <p class="text-sm text-slate-400 leading-relaxed">{data.shortDescription}</p>
                    <div class="flex flex-wrap gap-2">
                      {(data.technologies ?? []).slice(0, 4).map((tech) => (
                        <span class="rounded-full border border-slate-700 bg-slate-800 px-3 py-1 text-xs text-slate-300">
                          {tech}
                        </span>
                      ))}
                    </div>
                    <a href={`/servicios/${slug}`}
                       class="inline-flex items-center gap-2 text-emerald-300 text-sm transition-colors hover:text-emerald-200">
                      ¿Cómo lo trabajamos?
                      <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7 7 7-7 7" />
                      </svg>
                    </a>
                  </div>
                </div>
              </article>
            ))}
          </div>
        )}
      </div>
    </section>

    <section class="py-20">
      <div class="container mx-auto px-6">
        <div class="rounded-3xl border border-emerald-500/30 bg-gradient-to-br from-emerald-500/10 to-cyan-500/10 p-12 text-center backdrop-blur">
          <h2 class="text-3xl font-bold text-white mb-4">¿Listo para priorizar tu próximo sprint?</h2>
          <p class="text-lg text-slate-200 mb-8 max-w-2xl mx-auto">
            Agenda una sesión gratuita de 30 minutos con nuestro equipo para revisar tu estado actual, identificar quick wins y estimar el primer hito conjunto.
          </p>
          <a href="/contacto" class="inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-emerald-500 to-cyan-500 px-8 py-4 font-semibold text-white transition-all hover:from-emerald-600 hover:to-cyan-600">
            Agendar reunión
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-7-7 7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>
